<div class="teacher-container">
  <header>
    <div class="header-left">
      <!-- CNES logo -->
      <div class="cnes-logo-small">
        <img src="/assets/P41908_Vignette.jpg" alt="CNES Logo" class="cnes-logo-small-img">
      </div>
      <h1>{{ title }}</h1>
    </div>
    <div class="header-actions">
      <a [routerLink]="['/fpga-visualization']" class="cnes-button accent student-button">Student Interface</a>
      <a [routerLink]="['/']" class="cnes-button secondary back-button">Back to Home</a>
    </div>
  </header>

  <div class="main-content">
    <div class="upload-section">
      <div class="section-header">
        <div class="section-icon">
          <div class="icon-circle upload"></div>
        </div>
        <h2>Add a new Design</h2>
      </div>
      
      <div class="upload-form">
        <div class="form-group">
          <label for="verilogFile">Post-Synthesis Verilog File (.v)*</label>
          <div class="file-input-container">
            <input 
              type="file" 
              id="verilogFile" 
              accept=".v" 
              (change)="onVerilogFileSelected($event)"
              required
            >
            <div class="file-input-info">
              <span *ngIf="!selectedVerilogFile">No file selected</span>
              <span *ngIf="selectedVerilogFile">{{ selectedVerilogFile.name }}</span>
            </div>
          </div>
          <small>Upload your post-synthesis Verilog implementation file</small>
        </div>

        <div class="form-group">
          <label for="sdfFile">SDF Timing File (.sdf)*</label>
          <div class="file-input-container">
            <input 
              type="file" 
              id="sdfFile" 
              accept=".sdf" 
              (change)="onSdfFileSelected($event)"
              required
            >
            <div class="file-input-info">
              <span *ngIf="!selectedSdfFile">No file selected</span>
              <span *ngIf="selectedSdfFile">{{ selectedSdfFile.name }}</span>
            </div>
          </div>
          <small>Upload your Standard Delay Format timing file</small>
        </div>

        <div class="form-group">
          <label for="designName">Design Name (optional)</label>
          <input 
            type="text" 
            id="designName"
            [(ngModel)]="newDesignName"
            placeholder="Leave empty to use Verilog file name"
          >
          <small>If left empty, the name will be taken from the Verilog file</small>
        </div>

        <div class="form-group">
          <label for="designDescription">Description (Markdown supported)</label>
          <div class="markdown-container">
            <textarea 
              id="designDescription" 
              [(ngModel)]="newDesignDescription" 
              (ngModelChange)="updateMarkdownPreview()"
              placeholder="Enter design description using Markdown"
              rows="2"
              class="markdown-editor"
            ></textarea>
            
            <div *ngIf="markdownPreview">
              <div class="preview-label">Preview</div>
              <div class="preview-content" [innerHTML]="markdownPreview"></div>
            </div>
          </div>
          <small class="markdown-help">
            Supported Markdown: **bold**, *italic*, # headers, - lists, `code`, etc.
          </small>
        </div>

        <div class="form-actions">
          <button 
            class="cnes-button accent save-button" 
            (click)="saveDesign()" 
            [disabled]="isProcessing || !selectedVerilogFile || !selectedSdfFile"
          >
            <span *ngIf="!isProcessing">Save Design</span>
            <span *ngIf="isProcessing">Processing...</span>
          </button>
          <button 
            class="cnes-button secondary reset-button" 
            (click)="resetForm()" 
            [disabled]="isProcessing"
          >
            Reset Form
          </button>
        </div>
      </div>
    </div>

    <div class="designs-section">
      <div class="section-header">
        <div class="section-left">
          <div class="section-icon">
            <div class="icon-circle manage"></div>
          </div>
          <h2>Manage Designs</h2>
        </div>
        <a [routerLink]="['/fpga-visualization']" class="cnes-button accent visualize-button">
          Visualize Designs
          <span class="visualize-icon">➟</span>
        </a>
      </div>
      
      <!-- Add loading indicator -->
      <div *ngIf="isLoading" class="loading-indicator">
        Loading examples...
      </div>
      
      <!-- Import zone moved here -->
      <div class="import-section" 
           (dragover)="onDragOver($event)"
           (dragleave)="onDragLeave($event)"
           (drop)="onDrop($event)">
        <div class="import-zone" [class.drag-over]="isDragging">
          <input 
            type="file"
            id="importFile"
            accept=".zip"
            multiple
            (change)="onImportFile($event)"
            hidden
          >
          <div class="import-content">
            <p>Drag and drop design packages or <button 
              class="cnes-button-link"
              (click)="triggerImport()"
            >choose files</button></p>
            <small>Only .zip files are supported</small>
          </div>
        </div>
      </div>
      
      <div class="designs-list">
        <div *ngFor="let design of designs" class="design-card">
          <div class="design-header">
            <h3>{{ design.name }}</h3>
            <div class="design-actions">
              <button 
                class="cnes-button secondary export-button" 
                (click)="exportDesign(design.id)"
              >
                Export
              </button>
              <button 
                class="delete-button" 
                (click)="deleteDesign(design.id)"
              >
                <span class="delete-icon">×</span>
                Delete
              </button>
            </div>
          </div>
          
          <!-- Display HTML description -->
          <div class="design-description" [innerHTML]="design.description"></div>
          
          <!-- Display only Verilog and SDF files with arrows -->
          <div class="design-files">
            <div class="file-entry" *ngFor="let file of design.files | slice:0:2">
              → {{ file }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>© CNES, 2024 - FPGA Visualization Platform</p>
    <div class="logo-small">
      <!-- Small CNES logo -->
      <img src="/assets/P41908_Vignette.jpg" alt="CNES Logo" class="cnes-logo-small-img">
    </div>
  </footer>
</div>
